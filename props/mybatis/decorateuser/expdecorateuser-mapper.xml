<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.suyin.decorateuser.mapper.ExpDecorateUserMapper">

	<resultMap type="com.suyin.decorateuser.model.ExpDecorateUser" id="ExpDecorateUserMap">
	
		<result column="user_id" property="userId"/>
		<result column="openid" property="openid"/>
		<result column="use_openid" property="useOpenid"/>
		<result column="use_num" property="useNum"/>
		<result column="user_phone" property="userPhone"/>
		<result column="is_exp_user" property="isExpUser"/>
		<result column="is_exp_org" property="isExpOrg"/>
		<result column="nick_name" property="nickName"/>
		<result column="user_name" property="userName"/>
		<result column="user_state" property="userState"/>
		<result column="count_price" property="countPrice"/>
		<result column="balance_price" property="balancePrice"/>
		<result column="alipay_number" property="alipayNumber"/>
		<result column="iphone" property="iphone"/>
		<result column="password" property="password"/>
		<result column="head_img" property="headImg"/>
	
	</resultMap>
		<!--信息更新 -->
	<update id="updateExpDecorateUser"  parameterType="com.suyin.decorateuser.model.ExpDecorateUser">
		<![CDATA[
		update
		 t_exp_decorate_user
		set 
		openid={openid},
		use_openid={useOpenid},
		use_num={useNum},
		user_phone={userPhone},
		is_exp_user={isExpUser},
		is_exp_org={isExpOrg},
		nick_name={nickName},
		user_name={userName},
		user_state={userState},
		count_price={countPrice},
		balance_price={balancePrice},
		alipay_number={alipayNumber},
		iphone={iphone},
		password={password},
		head_img={headImg},
		where user_id ={userId}
		]]>
	</update>
	
	<!-- 信息插入 -->
	<insert id="addExpDecorateUser" parameterType="com.suyin.decorateuser.model.ExpDecorateUser" useGeneratedKeys="true" keyProperty="id">
	<![CDATA[

		insert  t_exp_decorate_user (
				openid,		
				use_openid,		
				use_num,		
				user_phone,		
				is_exp_user,		
				is_exp_org,		
				nick_name,		
				user_name,		
				user_state,		
				count_price,		
				balance_price,		
				alipay_number,		
				iphone,		
				password,		
				head_img,		
		)
		values(
				{openid},
				{useOpenid},
				{useNum},
				{userPhone},
				{isExpUser},
				{isExpOrg},
				{nickName},
				{userName},
				{userState},
				{countPrice},
				{balancePrice},
				{alipayNumber},
				{iphone},
				{password},
				{headImg},
		)
		]]>
	</insert>
	
	<!-- 根据id删除信息-->
	<delete id="deleteExpDecorateUser" parameterType="java.lang.String">
		<![CDATA[
	 	delete from t_exp_decorate_user
			  	where user_id ={userId}
		]]>
	</delete>
	
	<!-- 查询信息列表 -->
	<select id="findExpDecorateUser" parameterType="com.suyin.decorateuser.model.ExpDecorateUser" resultMap="ExpDecorateUserMap">
	   <![CDATA[
		select * from t_exp_decorate_user where 1=1 and user_id=#{userId}
		]]>
	</select>
	
	<!-- 分页查询信息 -->
	<select id="findExpDecorateUserByPage" parameterType="com.suyin.decorateuser.model.ExpDecorateUser" resultMap="ExpDecorateUserMap">
		<![CDATA[
			SELECT
				*
			FROM
				t_exp_decorate_user t
			WHERE
				1 = 1
		]]>
		<if test="-1==saerchType and null!=text">
			AND
			t.user_phone like '%${text}%'
			OR
			t.nick_name like '%${text}%'
			OR
			t.user_name like '%${text}%'
		</if>
		<if test="null!=saerchType and 1==saerchType">
			<if test="null!=userPhone and ''!=userPhone">
			AND
			t.user_phone like '%${userPhone}%'
			</if>
			<if test="null!=nickName and ''!=nickName">
			AND 
			t.nick_name like '%${nickName}%'
			</if>
			<if test="null!=userName and ''!=userName">	
			AND 
			t.user_name like '%${userName}%'
			</if>
		</if>
	</select>
	
</mapper>	